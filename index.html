<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1080, initial-scale=0.4">
    <title>bleu/cisne_soluble</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<img id="gifFrame" src="frames/frame0.png"> 
    
    <!-- Entire webpage -->
    <div id="main-wrapper">
      <div id="dungeon"> 
          <button id="leaveButton">Leave dungeon</button>
          <img id="hiddenGif" src="descend_animation.gif" style="display:none;">
          
          <img src="background.png"> 
        
      </div>
        
      <div> <p>game intro</p> </div>
        
      <div id="dungeon"> <img src="animationRoomBorder.gif"> </div>  
        
      <div> <p>first dialogue</p> </div>
        
      <div id="dungeon"> <img src="scroll.png"> 
        
      </div>
        
      <div> 
          <p>captchas</p>
          <form>
                <label for="fname">Type the characters seen in the image below</label>
                <br> <br>
                <img src="cede.png">
                <br>
                <label for="fname"></label><br>
                <input type="text" id="fname" name="fname" value="">
                <br> <br>
                <input type="submit" value="Confirm">
            </form>
          
           <form>
                <label for="fname">Type the characters seen in the image below</label>
                <br> <br>
                <img src="bypass.png">
                <br>
                <label for="fname"></label><br>
                <input type="text" id="fname" name="fname" value="">
                <br> <br>
                <input type="submit" value="Confirm">
            </form> 
          
           <form>
                <label for="fname">Type the characters seen in the image below</label>
                <br> <br>
                <img src="crawl.png">
                <br>
                <label for="fname"></label><br>
                <input type="text" id="fname" name="fname" value="">
                <br> <br>
                <input type="submit" value="Confirm">
            </form> 
          
           <form>
                <label for="fname">Type the characters seen in the image below</label>
                <br> <br>
                <img src="detach.png">
                <br>
                <label for="fname"></label><br>
                <input type="text" id="fname" name="fname" value="">
                <br> <br>
                <input type="submit" value="Confirm">
            </form> 
          
           <form>
                <label for="fname">Type the characters seen in the image below</label>
                <br> <br>
                <img src="godspeed.png">
                <br>
                <label for="fname"></label><br>
                <input type="text" id="fname" name="fname" value="">
                <br> <br>
                <input type="submit" value="Confirm">
            </form> 
          
           <form>
                <label for="fname">Type the characters seen in the image below</label>
                <br> <br>
                <img src="repent.png">
                <br>
                <label for="fname"></label><br>
                <input type="text" id="fname" name="fname" value="">
                <br> <br>
                <input type="submit" value="Confirm">
            </form> 
        </div>  
        
      <div id="dungeon">
            <img src="bg_egg.png">
            <div id="puzzle">
                    <img src="Puzzle.png">
                    <form id="text-in-frame">  
                    <input type="checkbox" id="robot" name="robot1" value="robotBool">
                    <label for="vehicle1"> I'm not a robot</label><br>
                    <input type="submit" value="Submit">
                    </form>
                </div>
          
      </div>
        
      <div><p>further interactions</p></div>
        
        <div id="dungeon"> 
            <p>please... untether me</p>
            <button id="swap-btn">disconnect them.</button>
        <img id="dungeon-img" src="finalCave.png">
      </div> 
      <div> <p>make a choice</p> </div>
     
      <div id="dungeon"> 
        <img src="room4border.png">
      </div> 
      <div> <p>make a choice</p> </div>
        
      
        
       <!-- <div id="dungeon"> 
        <img src="snake.png" width="90%">
      </div> 
      <div> <p>make a choice</p> </div> -->
        
    </div>

</body>
</html>

<script>
  const totalFrames = 16;
  const scrollLoopHeight = window.innerHeight; // Loop every 100% vh
  const img = document.getElementById('gifFrame');

  // Preload frames for smooth playback
  const frames = [];
  for (let i = 0; i < totalFrames; i++) {
    frames[i] = new Image();
    frames[i].src = `frames/frame${i}.png`;
  }

  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    const progress = (scrollY % scrollLoopHeight) / scrollLoopHeight;
    const frameIndex = Math.floor(progress * totalFrames);
    img.src = frames[frameIndex].src;
  });
    
      const imgCave = document.getElementById('dungeon-img');
  document.getElementById('swap-btn').addEventListener('click', () => {
    imgCave.src = 'finalGif.gif';
  });
    
    
  const leaveButton = document.getElementById('leaveButton');
  const gif = document.getElementById('hiddenGif');

  leaveButton.addEventListener('click', () => {
    gif.src = gif.src.split('?')[0] + '?' + new Date().getTime();
    gif.style.display = 'block';
  });    
</script>
